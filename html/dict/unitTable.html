<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>清溪物流保税中心</title>
	<link href="../../bootstrap/css/bootstrap.min.css" rel="stylesheet" type="text/css" />
	<link rel="stylesheet" type="text/css" href="../../css/style.css" media="screen">
	<link rel="stylesheet" type="text/css" href="../../css/nav.css">

</head>
<body>
	<div id="body-wrapper">
		<div id="top">
			<a href="/"><img src="../../images/logo2.png" height="60px"> </a>
		</div>
		<div id="body-content">
			<div id="sidebar" >
				<div id="sidebar-wrapper">
					<!-- Sidebar with logo and menu -->
					<h1 id="sidebar-title">
						<a href="#">清溪物流保税中心</a>
					</h1>
					<!-- Logo (221px wide) -->
					<a href="/">
						<!--<img alt="Xinze RRP logo" id="logo" src="../images/logo.png">-->
					</a>
					<!-- Sidebar Profile links -->
					<div id="profile-links">
						<!--	你好,
						<a href="/me">user</a>
						,
						<span id="welcome_message">欢迎你</span>-->
						<br>
						<br>
						<a href="../adminHomepage.html">首页</a>
						|
						<a href="../adminData.html">我的资料</a>
						|
						<a href="/signout">安全退出</a>
					</div>
					<div class="sidebar-menu">
						<ul id="main-nav" class="nav nav-pills nav-stacked">
							<!-- Accordion Menu -->
							<li>
								<a href="#me" class="nav-header collapsed nav-top-item" data-toggle="collapse">我的资料</a>
								<ul class="nav nav-list collapse" id="me">
									<li>
										<a href="../adminData.html" class="users_me users_modify ">我的资料</a>
									</li>
								</ul>
							</li>
							<li>
								<a href="#enterprises" class="nav-header collapsed nav-top-item" data-toggle="collapse">企业管理</a>
								<ul class="nav nav-list collapse" id="enterprises">
									<li>
										<a href="../enterprises/enterprisesBackup.html" class="enterprisesBackup ">企业备案</a>
									</li>
									<li>
										<a href="enterprisesManagement.html" class="qualification">资质管理</a>
									</li>
									<li>
										<a href="foreignEnterprisesManagement.html" class="mergeRelationship">归并关系管理</a>
									</li>
									<li>
										<a href="dictionary.html" class="enterprisesInformationQuery">企业信息查询</a>
									</li>
									<li>
										<a href="dictionary.html" class="vehicle">车辆备案</a>
									</li>
									<li>
										<a href="dictionary.html" class="ICCard">IC卡备案</a>
									</li>
								</ul>
							</li>
							<li>
								<a href="#dictionary" class="nav-header collapsed nav-top-item" data-toggle="collapse" >数据字典</a>
								<ul class="nav nav-list collapse" id="dictionary">
									<li>
										<a href="../dictionary.html" class="dictionary current">数据字典</a>
									</li>
								</ul>
							</li>
							<li>
								<a href="#inquery" class="nav-header collapsed nav-top-item" data-toggle="collapse">查询统计</a>
								<ul class="nav nav-list collapse" id="inquery">
									<li>
										<a href="inquery.html">查询统计</a>
									</li>
								</ul>
							</li>
						</ul>
				             </div>
				</div>
			</div>
			<!-- End #sidebar -->

			<div id="main-content">
							<!-- Main Content Section with everything -->
				<noscript>
					<!-- Show a notification if the user has disabled javascript -->
					<div class="notification error png_bg">
						<div>
							Javascript is disabled or is not supported by your browser. Please <a href="http://browsehappy.com/" title="Upgrade to a better browser">upgrade</a> your browser or <a href="http://www.google.com/support/bin/answer.py?answer=23852" title="Enable Javascript in your browser">enable</a> Javascript to navigate the interface properly.
							Download From <a href="http://www.exet.tk">exet.tk</a>
						</div>
					</div>
				</noscript>
				<div id="information" class="notification information png_bg" style="display: none;">
					<div>
						成功创建字典条目.
					</div>
				</div>
				<div style="margin-bottom:15px">
				<form>
					<label style="display: inline;" >搜索：</label>
					<input name="term" class="text-input medium-input" id="term" />
                                                           <input class="button"  value="搜索单位" name="commit" type="button" id="submitSearchUnit" />
				</form>
				</div>
				<div class="content-box">
					<!-- Start Content Box -->
					<div class="content-box-header">
						<h3>单位列表</h3>
						<div class="operations">
							<a href="unitTable/newUnit.html">添加新单位</a> | 
							<a href="../dictionary.html">返回字典列表</a>			
						</div>

					</div>

					<!-- End .content-box-header -->
					<div class="content-box-content">
						<div class="tab-content default-tab">
							<table>
								<thead>
									<tr>
										<th>编码</th>
										<th>名称</th>
										<th>操作</th>
									</tr>
								</thead>
 								<tfoot>
										 <tr >
											 <td colspan="6" style="text-align:right">
											 	<div class="pagination">
											 		
											 	</div>
											 </td>
										</tr>
									
								</tfoot>
								<tbody>
									
								</tbody>
							</table>
						</div>
					</div>
					<!-- End .content-box-content -->
				</div>
				<!-- End .content-box -->
				<div class="clear"></div>
				<div id="footer">
					<small>&#169;版权所有    2016   ，广州中长康达信息技术有限公司，粤ICP备06036366号 </small>
				</div>
			</div>
		</div>	
	</div>
	<script src="../../js/jquery-1.10.2.js"></script>
	<script src="../../js/jquery.params.js"></script>
	<script src="../../bootstrap/js/bootstrap.min.js"></script>
	<script type="text/javascript">
		var newOk=false;
		$(function(){$("#dictionary").collapse("show");});
		$(document).ready(function(){
			newOk=$.query.get("newOk");
					if(newOk)
						$("#information").css("display","block");
			$.ajax({
				type:"get",
				url: "displayUnit.action",
				dataType:"json",
				contentType : "application/json;charset=UTF-8",
				success: function(data){

					var length=data.dictUnits.length;
					var unitsConent=new Array(length);
					for(var h=0;h<length;h++)
					{
						unitsConent[h]={};
					}
					for(var k=0;k<length;k++)
					{
						unitsConent[k].unitCode=data.dictUnits[k].code;
						unitsConent[k].unitName=data.dictUnits[k].name;
						unitsConent[k].unitId=data.dictUnits[k].unitId;
					}
					var pages=Math.ceil(length/10);
					var foot="";
					for(var i=0;i<pages;i++)
					{
						foot+="<a>"+(i+1)+"</a>";
					}
					
					$("tfoot tr td div").append(foot);
					
					var content="";
					for(var j=0;j<length;j++)
					{
						content+="<tr>";
						content+="<td>"+unitsConent[j].unitCode+"</td>";
						content+="<td><a href='unitTable/lookUnit.html?unitCode="+unitsConent[j].unitCode+"&unitName="+unitsConent[j].unitName+"&unitId="+unitsConent[j].unitId+"'>"+unitsConent[j].unitName+"</a></td>";
						content+="<td><a href='unitTable/editUnit.html?unitCode="+unitsConent[j].unitCode+"&unitName="+unitsConent[j].unitName+"&unitId="+unitsConent[j].unitId+"'><img alt='编辑' src='../../images/icons/pencil.png' title='编辑'/></a>"+
									    	"<a name='"+unitsConent[j].unitId+"'><img alt='删除' src='../../images/icons/cross.png' title='删除' /></a></td>";
						content+="</tr>";
					}
					$("tbody").append(content);
					$("tbody tr:odd").css("background-color","#f3f3f3");
				
					
					},
					error:function(){
						alert("异常！")
					}
			});
				$("tbody tr td:last a img").on("click",function(){
					alert("what happened???");
						var deleteUnit={
							deleteUnit:{
								deleteCode:$(this).parent().parent().prev().prev().text(),
								deleteName:$(this).parent().parent().prev().children().text(),
								deleteId:$(this).parent().attr("name")
							}
						};
						$.ajax({
									 	type:"post",
						             url: "addUnit.action",
						             dataType:"json",
						             data:JSON.stringify(deleteUnit),
						             contentType : "application/json;charset=UTF-8",
						             success: function() {
						              location.href="unitTable.html";
						              },
						               error:function(){
						                 alert("异常！")
						                }
						});
					});
			$("#submitSearchUnit").on("click",function(){
						var search={
							searchTerm:$("#term").val()
						};
						$.ajax({
							 type:"get",
							 url: "queryUnit.action",
							dataType:"json",
							data:JSON.stringify(search),
							 contentType : "application/json;charset=UTF-8",
							 success: function(data) {
							 var length=data.dictUnits.length;
							var unitsConent=new Array(length);
							for(var h=0;h<length;h++)
							{
								unitsConent[h]={};
							}
							for(var k=0;k<length;k++)
							{
								unitsConent[k].unitCode=data.dictUnits[k].code;
								unitsConent[k].unitName=data.dictUnits[k].name;
								unitsConent[k].unitId=data.dictUnits[k].unitId;
							}
							var pages=Math.ceil(length/10);
							var foot="";
							for(var i=0;i<pages;i++)
							{
								foot+="<a>"+(i+1)+"</a>";
							}
							$("tfoot tr td div").append(foot);
										
							var content="";
							for(var j=0;j<length;j++)
							{
								content+="<tr>";
								content+="<td>"+unitsConent[j].unitCode+"</td>";
								content+="<td><a href='unitTable/lookUnit.html?unitCode="+unitsConent[j].unitCode+"&unitName="+unitsConent[j].unitName+"&unitId="+unitsConent[j].unitId+"'>"+unitsConent[j].unitName+"</a></td>";
								content+="<td><a href='unitTable/editUnit.html?unitCode="+unitsConent[j].unitCode+"&unitName="+unitsConent[j].unitName+"&unitId="+unitsConent[j].unitId+"'><img alt='编辑' src='../../images/icons/pencil.png' title='编辑'/></a>"+
														    	"<a id='deleteUnitId' name='"+unitsConent[j].unitId+"'><img alt='删除' src='../../images/icons/cross.png' title='删除' /></a></td>";
								content+="</tr>";
							}
							$("tbody").append(content);
							$("tbody tr:odd").css("background-color","#f3f3f3");
							 },
							   error:function(){
							 alert("异常！")
							}
						});
					});

		});
/*		$("#submitSearchUnit").on("click",function(){
			var length=55;
			var pages=Math.ceil(length/10);
					var foot="<div class='pagination'><td colspan='6'>";
					for(var i=0;i<pages;i++)
					{
						
						foot+="<a>"+(i+1)+"</a>";
						
					}
					foot+="</div></td>";

					$("tfoot tr").append(foot);
					var content="";
					for(var j=0;j<length;j++)
					{
						content+="<tr>";
						content+="<td>"+data.dictUnits[j].code+"</td>";
						content+="<td>"+data.dictUnits[j].name+"</td>";
						content+="</tr>"
					}
					$("tbody").append(content)
		});*/
	</script>
</body>
</html>